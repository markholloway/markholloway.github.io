<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    <title>Maya 2018 file size bug | Mark Holloway</title>
    <meta name="description" content="Notes from a curiosity-driven engineer.">
    <link rel="canonical" href="http://localhost:1313/blog/2017/11/16/maya-2018-file-size-bug/">
    
    
    <meta property="og:url" content="http://localhost:1313/blog/2017/11/16/maya-2018-file-size-bug/">
  <meta property="og:site_name" content="Mark Holloway">
  <meta property="og:title" content="Maya 2018 file size bug">
  <meta property="og:description" content="A very annoying bug came to light in mid-October which makes Maya 2018 binary scene files (*.mb) unreadable if they are larger than ~2 GB in size.
To be exact, the bug is hit when the file size is larger than 2147483647 bytes, the maximum positive value for a 32-bit signed binary integer.
A workaround is to instead save your scenes in Maya ASCII format (*.ma), since they are not affected by this bug. Or perhaps restructure your binary scenes into using references, so that the data is split up among several scene files and won’t reach the problematic file size.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2017-11-16T00:00:00+00:00">
    <meta property="article:modified_time" content="2017-11-16T00:00:00+00:00">
    <meta property="article:tag" content="Maya">
    <meta property="article:tag" content="Python">

    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Maya 2018 file size bug">
  <meta name="twitter:description" content="A very annoying bug came to light in mid-October which makes Maya 2018 binary scene files (*.mb) unreadable if they are larger than ~2 GB in size.
To be exact, the bug is hit when the file size is larger than 2147483647 bytes, the maximum positive value for a 32-bit signed binary integer.
A workaround is to instead save your scenes in Maya ASCII format (*.ma), since they are not affected by this bug. Or perhaps restructure your binary scenes into using references, so that the data is split up among several scene files and won’t reach the problematic file size.">

    
    
    
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Maya 2018 file size bug",
  "datePublished": "2017-11-16T00:00:00Z",
  "dateModified": "2017-11-16T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http:\/\/localhost:1313\/blog\/2017\/11\/16\/maya-2018-file-size-bug\/"
  },
  "author": {
    "@type": "Person",
    "name": "map[]"
  },
  "description": "A very annoying bug came to light in mid-October which makes Maya 2018 binary scene files (*.mb) unreadable if they are larger than ~2 GB in size.\nTo be exact, the bug is hit when the file size is larger than 2147483647 bytes, the maximum positive value for a 32-bit signed binary integer.\nA workaround is to instead save your scenes in Maya ASCII format (*.ma), since they are not affected by this bug. Or perhaps restructure your binary scenes into using references, so that the data is split up among several scene files and won\u0026rsquo;t reach the problematic file size.\n"
}
</script>



    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    
    
    <link rel="preload" href="/fonts/BerkeleyMono-Variable.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/fonts/CommitMono-Variable.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/fonts/MapleMono-Italic.woff2" as="font" type="font/woff2" crossorigin>
    
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/github-link.css" />
    
    <script defer src="https://cloud.umami.is/script.js" data-website-id="29980893-435d-4d73-962b-e2b6e505fb7e"></script>

  </head>

  <body class="preload">
    <script>
      (function() {
        
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
          document.body.classList.add(savedTheme);
        } else {
          if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.body.classList.add('dark');
          }
        }
        
        
        if ('fonts' in document) {
          
          Promise.race([
            document.fonts.ready,
            new Promise(resolve => setTimeout(resolve, 100)) 
          ]).then(() => {
            document.body.classList.remove('preload');
          });
        } else {
          
          setTimeout(() => {
            document.body.classList.remove('preload');
          }, 50);
        }
      })();
    </script>

    <nav style="display: flex; align-items: center; gap: 1em; flex-wrap: wrap;">
      <ul class="menu" style="margin: 0; padding: 0; flex-shrink: 0;">
        
        
        <li><a  href="/">Home</a></li>
        
        <li><a  href="/blog/">Blog</a></li>
        
        <li><a  href="/about/">About</a></li>
        
        <li><button id="theme-toggle" style="background:none; border:none; cursor:pointer; font-size:1em; padding:5px; color:inherit;">◑</button></li>
      </ul>
      
      
      <div id="search" style="flex-grow: 1; min-width: 200px;"></div>
    </nav>
    
    <link href="/pagefind/pagefind-ui.css" rel="stylesheet">
    <script src="/pagefind/pagefind-ui.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({ 
              element: "#search", 
              showSubResults: true,
              showImages: false,
              translations: {
                placeholder: "Search...",
                clear_search: "×"
              }
            });

            
            document.addEventListener('click', (e) => {
                const searchContainer = document.querySelector('#search');
                if (searchContainer && !searchContainer.contains(e.target)) {
                    const clearButton = searchContainer.querySelector('.pagefind-ui__search-clear');
                    if (clearButton) {
                        clearButton.click();
                    }
                }
            });

            
            const toggle = document.getElementById('theme-toggle');
            const body = document.body;

            toggle.addEventListener('click', () => {
              if (body.classList.contains('dark')) {
                body.classList.remove('dark');
                body.classList.add('light');
                localStorage.setItem('theme', 'light');
              } else {
                body.classList.remove('light');
                body.classList.add('dark');
                localStorage.setItem('theme', 'dark');
              }
            });
        });
    </script>


<div class="article-meta">
<h1><span class="title">Maya 2018 file size bug</span></h1>

<div class="article-meta-info">
  <span class="date">2017-11-16</span>
  
  <span class="article-tags">
    
    
    
    <a href="/tags/maya">#maya</a>
    
    
    
    <a href="/tags/python">#python</a>
    
    
  </span>
  
</div>
</div>



<main data-pagefind-body>
	
	
		

		<p>A very 



<a href="https://forums.autodesk.com/t5/maya-forum/maya-2018-error-opening-large-mb-files-over-2gb/td-p/7466095" target="_blank" rel="noopener">annoying bug</a> came to light in mid-October which makes Maya 2018 binary scene files (*.mb) unreadable if they are larger than ~2 GB in size.</p>
<p>To be exact, the bug is hit when the file size is larger than 



<a href="https://en.wikipedia.org/wiki/2,147,483,647" target="_blank" rel="noopener">2147483647</a> bytes, the maximum positive value for a 32-bit signed binary integer.</p>
<p>A workaround is to instead save your scenes in Maya ASCII format (*.ma), since they are not affected by this bug. Or perhaps restructure your binary scenes into using references, so that the data is split up among several scene files and won&rsquo;t reach the problematic file size.</p>
<p>Hopefully, we&rsquo;ll see a Maya 2018.2 update soon with this issue patched. But in the meanwhile, what can one do to avoid hitting this issue?</p>
<p>Using Python, we can check for a file&rsquo;s size in bytes like this:</p>
<div class="code-block-wrapper">
  <button class="copy-code-button" aria-label="Copy code to clipboard">
    <svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
      <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
    </svg>
    <svg class="check-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
      <polyline points="20 6 9 17 4 12"></polyline>
    </svg>
  </button><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">size_bytes</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">size_bytes</span> <span class="o">&gt;</span> <span class="mi">2147483647</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;scene file is larger than ~2GB&#39;</span><span class="p">)</span></span></span></code></pre></div></div>
<p>So ideally, we&rsquo;d like to have this run after a file save and let us know if we are getting close to 2 GB as well as if we exceeded this limit. Using a callback function, we can run custom code after each save command in Maya. Maya&rsquo;s callbacks are actually called 



<a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=GUID-A42F2A04-0216-408D-8073-F4D4D896CE8D" target="_blank" rel="noopener">&ldquo;scriptJobs&rdquo;</a>.</p>
<p>Here&rsquo;s a function which will check your Maya binary (*.mb) scene&rsquo;s size and warn you if you hit the bug or if you&rsquo;re getting close (at ~1.5 GB):</p>
<div class="code-block-wrapper">
  <button class="copy-code-button" aria-label="Copy code to clipboard">
    <svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
      <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
    </svg>
    <svg class="check-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
      <polyline points="20 6 9 17 4 12"></polyline>
    </svg>
  </button><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">maya.cmds</span> <span class="k">as</span> <span class="nn">cmds</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">check_2gb_bug</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Check for the 2GB scene file bug&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">filepath</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">file</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sceneName</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">maya_version</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">about</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="s1">&#39;2018&#39;</span> <span class="ow">in</span> <span class="n">maya_version</span> <span class="ow">and</span> <span class="n">filepath</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.mb&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">size_bytes</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">size_bytes</span> <span class="o">&gt;</span> <span class="mi">2147483647</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;You have hit the ~2GB bug, re-save your scene in &#39;</span>
</span></span><span class="line"><span class="cl">                       <span class="s1">&#39;ASCII format (*.ma) right now to avoid loosing data!&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">cmds</span><span class="o">.</span><span class="n">confirmDialog</span><span class="p">(</span><span class="n">icon</span><span class="o">=</span><span class="s1">&#39;critical&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="n">size_bytes</span> <span class="o">&gt;</span> <span class="mi">1610612736</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Your scene size is getting close to the ~2GB bug!&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">cmds</span><span class="o">.</span><span class="n">confirmDialog</span><span class="p">(</span><span class="n">icon</span><span class="o">=</span><span class="s1">&#39;warning&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Scene file size: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">size_bytes</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; bytes&#39;</span><span class="p">)</span></span></span></code></pre></div></div>
<p>You can register this function as a Maya script job which gets triggered after the scene is saved:</p>
<div class="code-block-wrapper">
  <button class="copy-code-button" aria-label="Copy code to clipboard">
    <svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
      <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
    </svg>
    <svg class="check-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
      <polyline points="20 6 9 17 4 12"></polyline>
    </svg>
  </button><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">cmds</span><span class="o">.</span><span class="n">scriptJob</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;SceneSaved&#39;</span><span class="p">,</span> <span class="s1">&#39;check_2gb_bug()&#39;</span><span class="p">])</span></span></span></code></pre></div></div>
<p>If you now save a binary scene file in Maya 2018, you should see the file size (in bytes) printed in the script editor. If you would exceed (or get close) to the problematic file size, a blocking dialog window will appear instead.</p>
<p>If you add both the function and the scriptJob command to e.g. your 



<a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=GUID-C0F27A50-3DD6-454C-A4D1-9E3C44B3C990" target="_blank" rel="noopener">userSetup.py</a>, you should have this script job active each time you start Maya, without having to re-enter the code above.</p>

</main>





<script>
  (function() {
    const container = document.getElementById('giscus-container');
    const loadBtn = document.getElementById('load-comments-btn');

    
    function loadGiscus() {
      if (!container) return;
      
      
      container.innerHTML = ''; 

      const theme = document.body.classList.contains('dark') ? 'dark' : 'light';
      
      const giscusScript = document.createElement('script');
      giscusScript.src = 'https://giscus.app/client.js';
      giscusScript.setAttribute('data-repo', 'markholloway/markholloway.com');
      giscusScript.setAttribute('data-repo-id', 'MDEwOlJlcG9zaXRvcnkxMzEwNDU4Njc=');
      giscusScript.setAttribute('data-category', 'General');
      giscusScript.setAttribute('data-category-id', 'DIC_kwDOB8-Z684CU9zc');
      giscusScript.setAttribute('data-mapping', 'title');
      giscusScript.setAttribute('data-strict', '0');
      giscusScript.setAttribute('data-reactions-enabled', '1');
      giscusScript.setAttribute('data-emit-metadata', '0');
      giscusScript.setAttribute('data-input-position', 'bottom');
      giscusScript.setAttribute('data-theme', theme);
      giscusScript.setAttribute('data-lang', 'en');
      giscusScript.setAttribute('crossorigin', 'anonymous');
      giscusScript.async = true;

      container.appendChild(giscusScript);
    }

    
    if (loadBtn) {
      loadBtn.addEventListener('click', loadGiscus);
    }

    
    function setGiscusTheme(theme) {
      const giscusFrame = document.querySelector('iframe.giscus-frame');
      if (giscusFrame && giscusFrame.contentWindow) {
        giscusFrame.contentWindow.postMessage(
          { giscus: { setConfig: { theme } } },
          'https://giscus.app'
        );
      }
    }

    
    const themeToggle = document.getElementById('theme-toggle');
    if (themeToggle) {
      themeToggle.addEventListener('click', () => {
        
        setTimeout(() => {
          const currentTheme = document.body.classList.contains('dark') ? 'dark' : 'light';
          setGiscusTheme(currentTheme);
        }, 10); 
      });
    }

    
    if (window.matchMedia) {
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
        if (!localStorage.getItem('theme')) { 
          const newTheme = event.matches ? "dark" : "light";
          setGiscusTheme(newTheme);
        }
      });
    }
  })();
</script>



<footer>
	<div class="footer-content">
		<span class="footer-icons">
			
			
			<a href="https://github.com/markholloway" target="_blank" rel="noopener" title="GitHub">
				

<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" fill="currentColor"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>

			</a>
			
			
			<a href="https://linkedin.com/in/mholloway" target="_blank" rel="noopener" title="LinkedIn">
				

<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>

			</a>
			
			
			<a href="/blog/index.xml" target="_blank" rel="noopener" title="RSS">
				

<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" fill="currentColor"><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"/></svg>

			</a>
			
			
			<a href="https://cloud.umami.is/share/x4yvhGEscsDh1in8" target="_blank" rel="noopener" title="Umami">
				

<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" fill="currentColor"><path d="M2.203 8.611H.857a.845.845 0 0 0-.841.841v.858a13.31 13.31 0 0 0-.016.6c0 6.627 5.373 12 12 12 6.527 0 11.837-5.212 11.996-11.701 0-.025.004-.05.004-.075V9.452a.845.845 0 0 0-.841-.841h-1.346c-1.159-4.329-5.112-7.521-9.805-7.521-4.692 0-8.645 3.192-9.805 7.521Zm18.444 0H3.37c1.127-3.702 4.57-6.399 8.638-6.399 4.069 0 7.512 2.697 8.639 6.399Z"/></svg>

			</a>
			
		</span>
		<span class="footer-text">
			© Mark Holloway 2005-2026
		</span>
	</div>
	<script src="/js/main.js"></script>

</footer>
</body>

</html>

