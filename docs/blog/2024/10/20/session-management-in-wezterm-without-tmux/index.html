<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Session management in Wezterm (without tmux) | Mark Holloway</title><meta name=description content="Notes from a curiosity-driven engineer."><link rel=canonical href=https://markholloway.com/blog/2024/10/20/session-management-in-wezterm-without-tmux/><meta property="og:url" content="https://markholloway.com/blog/2024/10/20/session-management-in-wezterm-without-tmux/"><meta property="og:site_name" content="Mark Holloway"><meta property="og:title" content="Session management in Wezterm (without tmux)"><meta property="og:description" content="I’ve been using Neovim as my daily IDE/editor for a bit more than a year now. I’ve also been using tmux to manage sessions, first using t-smart-tmux-session-manager and later sesh, which supersedes the former project. What’s great about this is that it doesn’t matter which terminal emulator you use, you can still fall back to this kind of session management."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2024-10-20T00:00:00+00:00"><meta property="article:modified_time" content="2024-10-20T00:00:00+00:00"><meta property="article:tag" content="Neovim"><meta property="article:tag" content="Terminal"><meta property="article:tag" content="Lua"><meta name=twitter:card content="summary"><meta name=twitter:title content="Session management in Wezterm (without tmux)"><meta name=twitter:description content="I’ve been using Neovim as my daily IDE/editor for a bit more than a year now. I’ve also been using tmux to manage sessions, first using t-smart-tmux-session-manager and later sesh, which supersedes the former project. What’s great about this is that it doesn’t matter which terminal emulator you use, you can still fall back to this kind of session management."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Session management in Wezterm (without tmux)","datePublished":"2024-10-20T00:00:00Z","dateModified":"2024-10-20T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/markholloway.com\/blog\/2024\/10\/20\/session-management-in-wezterm-without-tmux\/"},"author":{"@type":"Person","name":"map[]"},"description":"I\u0026rsquo;ve been using Neovim as my daily IDE\/editor for a bit more than a year now. I\u0026rsquo;ve also been using tmux to manage sessions, first using t-smart-tmux-session-manager and later sesh, which supersedes the former project. What\u0026rsquo;s great about this is that it doesn\u0026rsquo;t matter which terminal emulator you use, you can still fall back to this kind of session management.\n"}</script><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=preload href=/fonts/BerkeleyMono-Variable.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/CommitMono-Variable.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/MapleMono-Italic.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/github-link.css><script defer src=https://cloud.umami.is/script.js data-website-id=c9c97df3-bc05-4b29-8caa-fcf03a05710f></script></head><body class=preload><script>(function(){const e=localStorage.getItem("theme");e?document.body.classList.add(e):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark"),"fonts"in document?Promise.race([document.fonts.ready,new Promise(e=>setTimeout(e,100))]).then(()=>{document.body.classList.remove("preload")}):setTimeout(()=>{document.body.classList.remove("preload")},50)})()</script><nav style=display:flex;align-items:center;gap:1em;flex-wrap:wrap><ul class=menu style=margin:0;padding:0;flex-shrink:0><li><a href=/>Home</a></li><li><a href=/blog/>Blog</a></li><li><a href=/about/>About</a></li><li><button id=theme-toggle style="background:0 0;border:none;cursor:pointer;font-size:1em;padding:5px;color:inherit">◑</button></li></ul><div id=search style=flex-grow:1;min-width:200px></div></nav><link href=/pagefind/pagefind-ui.css rel=stylesheet><script src=/pagefind/pagefind-ui.js></script><script>window.addEventListener("DOMContentLoaded",e=>{new PagefindUI({element:"#search",showSubResults:!0,showImages:!1,translations:{placeholder:"Search...",clear_search:"×"}}),document.addEventListener("click",e=>{const t=document.querySelector("#search");if(t&&!t.contains(e.target)){const e=t.querySelector(".pagefind-ui__search-clear");e&&e.click()}});const n=document.getElementById("theme-toggle"),t=document.body;n.addEventListener("click",()=>{t.classList.contains("dark")?(t.classList.remove("dark"),t.classList.add("light"),localStorage.setItem("theme","light")):(t.classList.remove("light"),t.classList.add("dark"),localStorage.setItem("theme","dark"))})})</script><div class=article-meta><h1><span class=title>Session management in Wezterm (without tmux)</span></h1><div class=article-meta-info><span class=date>2024-10-20</span>
<span class=article-tags><a href=/tags/neovim>#neovim</a>
<a href=/tags/terminal>#terminal</a>
<a href=/tags/lua>#lua</a></span></div></div><div class=featured-image><img src=/blog/assets/wezterm/wezterm_workspaces.png alt="Session management in Wezterm (without tmux)"></div><main data-pagefind-body><aside class=table-of-contents><div class=toc-title><svg class="callout-icon" viewBox="0 0 24 24" width="16" height="16" aria-hidden="true" fill="currentColor"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"/></svg>
Table of Contents</div><nav id=TableOfContents><ul><li><a href=#replacing-tmux-with-wezterms-session-management>Replacing tmux with Wezterm&rsquo;s session management</a></li><li><a href=#bonus-tabs>Bonus: tabs</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></aside><p>I&rsquo;ve been using
<a href=https://github.com/neovim/neovim target=_blank rel=noopener class=github-link><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>Neovim</a> as my daily
IDE/editor for a bit more than a year now. I&rsquo;ve also been using
<a href=https://github.com/tmux/tmux target=_blank rel=noopener class=github-link><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>tmux</a> to manage sessions, first using
<a href=https://github.com/joshmedeski/t-smart-tmux-session-manager target=_blank rel=noopener class=github-link><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>t-smart-tmux-session-manager</a>
and later
<a href=https://github.com/joshmedeski/sesh target=_blank rel=noopener class=github-link><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>sesh</a>, which supersedes the
former project. What&rsquo;s great about this is that it doesn&rsquo;t matter which terminal
emulator you use, you can still fall back to this kind of session management.</p><p>But the draw screen latency (and complexity) of tmux is annoying and I finally
took some time to evaluate the session management capabilities of
<a href=https://github.com/wez/wezterm target=_blank rel=noopener class=github-link><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>Wezterm</a> (my currently favorite terminal
emulator, which you configure with Lua!) called
&ldquo;
<a href=https://wezfurlong.org/wezterm/recipes/workspaces.html target=_blank rel=noopener>workspaces</a>&rdquo;, to see
if this could replace tmux altogether for me.</p><h2 id=replacing-tmux-with-wezterms-session-management>Replacing tmux with Wezterm&rsquo;s session management</h2><p>Well, spoiler alert; it works <em>really</em> well and with the help of
<a href=https://github.com/MLFlexer/smart_workspace_switcher.wezterm target=_blank rel=noopener class=github-link><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>smart_workspace_switcher.wezterm</a>,
I can get pretty much the same behavior as I am used to with sesh. They both
leverage
<a href=https://github.com/ajeetdsouza/zoxide target=_blank rel=noopener class=github-link><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>zoxide</a> for fuzzy-searching
recently visited folders.</p><blockquote class="callout markdown-alert callout-note markdown-alert-note"><div class="callout-title markdown-alert-title"><svg class="callout-icon" viewBox="0 0 24 24" width="16" height="16" aria-hidden="true" fill="currentColor"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42.0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/></svg>
Workspaces setup and management</div><div class=callout-content><div class=code-block-wrapper><button class=copy-code-button aria-label="Copy code to clipboard">
<svg class="copy-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/></svg>
<svg class="check-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:none"><polyline points="20 6 9 17 4 12"/></svg></button><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=c1>-- print the workspace name at the upper right</span>
</span></span><span class=line><span class=cl><span class=n>wezterm.on</span><span class=p>(</span><span class=s2>&#34;update-right-status&#34;</span><span class=p>,</span> <span class=kr>function</span><span class=p>(</span><span class=n>window</span><span class=p>,</span> <span class=n>pane</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>window</span><span class=p>:</span><span class=n>set_right_status</span><span class=p>(</span><span class=n>window</span><span class=p>:</span><span class=n>active_workspace</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=kr>end</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>-- load plugin</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>workspace_switcher</span> <span class=o>=</span> <span class=n>wezterm.plugin</span><span class=p>.</span><span class=n>require</span><span class=p>(</span><span class=s2>&#34;https://github.com/MLFlexer/smart_workspace_switcher.wezterm&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>-- set path to zoxide</span>
</span></span><span class=line><span class=cl><span class=n>workspace_switcher.zoxide_path</span> <span class=o>=</span> <span class=s2>&#34;/opt/homebrew/bin/zoxide&#34;</span>
</span></span><span class=line><span class=cl><span class=c1>-- keymaps</span>
</span></span><span class=line><span class=cl><span class=n>table.insert</span><span class=p>(</span><span class=n>keys</span><span class=p>,</span> <span class=p>{</span> <span class=n>key</span> <span class=o>=</span> <span class=s2>&#34;s&#34;</span><span class=p>,</span> <span class=n>mods</span> <span class=o>=</span> <span class=s2>&#34;CTRL|SHIFT&#34;</span><span class=p>,</span> <span class=n>action</span> <span class=o>=</span> <span class=n>workspace_switcher.switch_workspace</span><span class=p>()</span> <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=n>table.insert</span><span class=p>(</span><span class=n>keys</span><span class=p>,</span> <span class=p>{</span> <span class=n>key</span> <span class=o>=</span> <span class=s2>&#34;t&#34;</span><span class=p>,</span> <span class=n>mods</span> <span class=o>=</span> <span class=s2>&#34;CTRL|SHIFT&#34;</span><span class=p>,</span> <span class=n>action</span> <span class=o>=</span> <span class=n>act.ShowLauncherArgs</span><span class=p>({</span> <span class=n>flags</span> <span class=o>=</span> <span class=s2>&#34;FUZZY|WORKSPACES&#34;</span> <span class=p>})</span> <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=n>table.insert</span><span class=p>(</span><span class=n>keys</span><span class=p>,</span> <span class=p>{</span> <span class=n>key</span> <span class=o>=</span> <span class=s2>&#34;[&#34;</span><span class=p>,</span> <span class=n>mods</span> <span class=o>=</span> <span class=s2>&#34;CTRL|SHIFT&#34;</span><span class=p>,</span> <span class=n>action</span> <span class=o>=</span> <span class=n>act.SwitchWorkspaceRelative</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span> <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=n>table.insert</span><span class=p>(</span><span class=n>keys</span><span class=p>,</span> <span class=p>{</span> <span class=n>key</span> <span class=o>=</span> <span class=s2>&#34;]&#34;</span><span class=p>,</span> <span class=n>mods</span> <span class=o>=</span> <span class=s2>&#34;CTRL|SHIFT&#34;</span><span class=p>,</span> <span class=n>action</span> <span class=o>=</span> <span class=n>act.SwitchWorkspaceRelative</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=p>})</span></span></span></code></pre></div></div><p>Full <code>wezterm.lua</code> source
<a href=https://github.com/fredrikaverpil/dotfiles/blob/main/wezterm.lua target=_blank rel=noopener class=github-link><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>here</a>.</p></div></blockquote><p>I use <code>Ctrl+Shift+s</code> to bring up the workspace manager. Then I start typing out
the path I want to open a new session in. Then I can hit that same command again
to jump between workspaces, or I can use <code>Ctrl+Shift+[</code> or <code>Ctrl+Shift+]</code> to
jump between them more quickly. If I want to view only the currently opened
workspaces, I can use <code>Ctrl+Shift+t</code>.</p><p>The only thing I&rsquo;m a little wary about is how wezterm plugins are just read on
the fly from the Internet like this. I might vendor the
<code>smart_workspace_switcher.wezterm</code> project into my own dotfiles in the long
term.</p><p>I&rsquo;ve also set up a custom workspace which is loaded on Wezterm startup, which
goes into my dotfiles repository and starts up Neovim. Using a hotkey
<code>Ctrl+Shift+d</code> I can also always jump directly to this workspace.</p><blockquote class="callout markdown-alert callout-note markdown-alert-note"><div class="callout-title markdown-alert-title"><svg class="callout-icon" viewBox="0 0 24 24" width="16" height="16" aria-hidden="true" fill="currentColor"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42.0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/></svg>
Custom workspace on startup</div><div class=callout-content><div class=code-block-wrapper><button class=copy-code-button aria-label="Copy code to clipboard">
<svg class="copy-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/></svg>
<svg class="check-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:none"><polyline points="20 6 9 17 4 12"/></svg></button><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=c1>-- set up workspace to be loaded on startup of wezterm</span>
</span></span><span class=line><span class=cl><span class=n>wezterm.on</span><span class=p>(</span><span class=s2>&#34;gui-startup&#34;</span><span class=p>,</span> <span class=kr>function</span><span class=p>(</span><span class=n>cmd</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kd>local</span> <span class=n>dotfiles_path</span> <span class=o>=</span> <span class=n>wezterm.home_dir</span> <span class=o>..</span> <span class=s2>&#34;/.dotfiles&#34;</span>
</span></span><span class=line><span class=cl>  <span class=kd>local</span> <span class=n>tab</span><span class=p>,</span> <span class=n>build_pane</span><span class=p>,</span> <span class=n>window</span> <span class=o>=</span> <span class=n>mux.spawn_window</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=n>workspace</span> <span class=o>=</span> <span class=s2>&#34;dotfiles&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>cwd</span> <span class=o>=</span> <span class=n>dotfiles_path</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>args</span> <span class=o>=</span> <span class=n>args</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=n>build_pane</span><span class=p>:</span><span class=n>send_text</span><span class=p>(</span><span class=s2>&#34;nvim</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>mux.set_active_workspace</span><span class=p>(</span><span class=s2>&#34;dotfiles&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>-- set up keymap for quickly jumping to this workspace</span>
</span></span><span class=line><span class=cl><span class=n>table.insert</span><span class=p>(</span><span class=n>keys</span><span class=p>,</span> <span class=p>{</span> <span class=n>key</span> <span class=o>=</span> <span class=s2>&#34;d&#34;</span><span class=p>,</span> <span class=n>mods</span> <span class=o>=</span> <span class=s2>&#34;CTRL|SHIFT&#34;</span><span class=p>,</span> <span class=n>action</span> <span class=o>=</span> <span class=n>act.SwitchToWorkspace</span><span class=p>({</span> <span class=n>name</span> <span class=o>=</span> <span class=s2>&#34;dotfiles&#34;</span> <span class=p>})</span> <span class=p>})</span></span></span></code></pre></div></div><p>Full <code>wezterm.lua</code> source
<a href=https://github.com/fredrikaverpil/dotfiles/blob/main/wezterm.lua target=_blank rel=noopener class=github-link><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>here</a>.</p></div></blockquote><p>Be sure to visit the
<a href=https://wezfurlong.org/wezterm/recipes/workspaces.html target=_blank rel=noopener>Workspaces/sessions</a>
docs for further reading on the different commands at your disposal and recipes.</p><h2 id=bonus-tabs>Bonus: tabs</h2><p><img src=/blog/assets/wezterm/wezterm_tabs.png alt="Wezterm tabs"></p><p>I primarily use workspaces with Wezterm now, but it&rsquo;s also convenient to have
tabs around (can be used without workspaces). I have a custom setup which
entails adding the following config to <code>wezterm.lua</code>, which is heavily inspired
by
<a href=https://github.com/aaronlifton/.config/blob/main/.config/wezterm/wezterm.lua target=_blank rel=noopener class=github-link><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>aaronlifton&rsquo;s wezterm.lua config</a>.</p><p>So, when hitting <code>Cmd+T</code>, a new tab shows and is prefixed by a number. Tabs can
then be selected by hitting <code>Cmd+[number]</code>.</p><blockquote class="callout markdown-alert callout-note markdown-alert-note"><div class="callout-title markdown-alert-title"><svg class="callout-icon" viewBox="0 0 24 24" width="16" height="16" aria-hidden="true" fill="currentColor"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42.0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/></svg>
Custom tabs</div><div class=callout-content><div class=code-block-wrapper><button class=copy-code-button aria-label="Copy code to clipboard">
<svg class="copy-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/></svg>
<svg class="check-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:none"><polyline points="20 6 9 17 4 12"/></svg></button><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=n>config.hide_tab_bar_if_only_one_tab</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=n>config.use_fancy_tab_bar</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>get_current_working_dir</span><span class=p>(</span><span class=n>tab</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kd>local</span> <span class=n>current_dir</span> <span class=o>=</span> <span class=n>tab.active_pane</span> <span class=ow>and</span> <span class=n>tab.active_pane</span><span class=p>.</span><span class=n>current_working_dir</span> <span class=ow>or</span> <span class=p>{</span> <span class=n>file_path</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>local</span> <span class=n>HOME_DIR</span> <span class=o>=</span> <span class=n>string.format</span><span class=p>(</span><span class=s2>&#34;file://%s&#34;</span><span class=p>,</span> <span class=n>os.getenv</span><span class=p>(</span><span class=s2>&#34;HOME&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>return</span> <span class=n>current_dir</span> <span class=o>==</span> <span class=n>HOME_DIR</span> <span class=ow>and</span> <span class=s2>&#34;.&#34;</span> <span class=ow>or</span> <span class=n>string.gsub</span><span class=p>(</span><span class=n>current_dir.file_path</span><span class=p>,</span> <span class=s2>&#34;(.*[/</span><span class=se>\\</span><span class=s2>])(.*)&#34;</span><span class=p>,</span> <span class=s2>&#34;%2&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>wezterm.on</span><span class=p>(</span><span class=s2>&#34;format-tab-title&#34;</span><span class=p>,</span> <span class=kr>function</span><span class=p>(</span><span class=n>tab</span><span class=p>,</span> <span class=n>tabs</span><span class=p>,</span> <span class=n>panes</span><span class=p>,</span> <span class=n>config</span><span class=p>,</span> <span class=n>hover</span><span class=p>,</span> <span class=n>max_width</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kd>local</span> <span class=n>has_unseen_output</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>  <span class=kr>if</span> <span class=ow>not</span> <span class=n>tab.is_active</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>    <span class=kr>for</span> <span class=n>_</span><span class=p>,</span> <span class=n>pane</span> <span class=kr>in</span> <span class=n>ipairs</span><span class=p>(</span><span class=n>tab.panes</span><span class=p>)</span> <span class=kr>do</span>
</span></span><span class=line><span class=cl>      <span class=kr>if</span> <span class=n>pane.has_unseen_output</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>        <span class=n>has_unseen_output</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>        <span class=kr>break</span>
</span></span><span class=line><span class=cl>      <span class=kr>end</span>
</span></span><span class=line><span class=cl>    <span class=kr>end</span>
</span></span><span class=line><span class=cl>  <span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>local</span> <span class=n>cwd</span> <span class=o>=</span> <span class=n>wezterm.format</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=n>Attribute</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Intensity</span> <span class=o>=</span> <span class=s2>&#34;Bold&#34;</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=n>Text</span> <span class=o>=</span> <span class=n>get_current_working_dir</span><span class=p>(</span><span class=n>tab</span><span class=p>)</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>local</span> <span class=n>title</span> <span class=o>=</span> <span class=n>string.format</span><span class=p>(</span><span class=s2>&#34; [%s] %s&#34;</span><span class=p>,</span> <span class=n>tab.tab_index</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>cwd</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>if</span> <span class=n>has_unseen_output</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>    <span class=kr>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=n>Foreground</span> <span class=o>=</span> <span class=p>{</span> <span class=n>Color</span> <span class=o>=</span> <span class=s2>&#34;#8866bb&#34;</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=n>Text</span> <span class=o>=</span> <span class=n>title</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=n>Text</span> <span class=o>=</span> <span class=n>title</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>end</span><span class=p>)</span></span></span></code></pre></div></div><p>Full <code>wezterm.lua</code> source
<a href=https://github.com/fredrikaverpil/dotfiles/blob/main/wezterm.lua target=_blank rel=noopener class=github-link><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>here</a>.</p></div></blockquote><h2 id=conclusion>Conclusion</h2><p>The benefit of having sessions management built into the terminal emulator
itself provides quicker feedback and less complexity overall. But this approach
is a lot more dependent on which terminal emulator you&rsquo;re using and what
capabilities are available. Tmux with sesh is a great solution to fall back on,
if e.g. trying out another terminal emulator.</p><p>There are also other ways to jump between projects from <em>within</em> Neovim, such as
with
<a href=https://github.com/nvim-telescope/telescope-project.nvim target=_blank rel=noopener class=github-link><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>telescope-project.nvim</a>,
but these kinds of tools rarely solve the problem of supporting e.g.
<a href=https://direnv.net/ target=_blank rel=noopener>direnv</a> or
<a href=https://pkgx.sh/ target=_blank rel=noopener>pkgx</a>/
<a href=https://asdf-vm.com/ target=_blank rel=noopener>asdf</a>, which are tools that use
shell integration, and executes when you enter a folder (i.e. switching
sessions). To make such tooling work well, you need to keep track of what your
Neovim plugins are doing and which ones need special treatment to play well with
this kind of behavior. I tried this setup out
<a href=https://github.com/fredrikaverpil/dotfiles/pull/160 target=_blank rel=noopener class=github-link><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>in this PR</a>
at one point,
but I didn&rsquo;t like the added complexity which I have to maintain.</p><p>On leaving tmux behind, Wezterm comes out of the box with the notion of windows
and panes, the ability to split horizontally or vertically and most of the
features I would&rsquo;ve missed from leaving tmux (although I do most of these things
inside Neovim instead). Hit <code>Ctrl+Shift+P</code> to bring up the command palette and
explore.</p><p>I&rsquo;m delighted to have a terminal emulator which is configurable with lua, the
same language as Neovim itself, as this makes configuring a lot more
customizable than e.g. a json/yaml-configured terminal. But I&rsquo;m also very
curious on
<a href=https://mitchellh.com/ghostty target=_blank rel=noopener>Ghostty</a>, which seems to be around
the corner from being publicly released, and what sessions management
capabilities it may bring.</p></main><div id=giscus-container class=giscus-comments><div class=load-comments-wrapper><button id=load-comments-btn class=load-comments-btn>Load Comments</button></div></div><script>(function(){const e=document.getElementById("giscus-container"),t=document.getElementById("load-comments-btn");function o(){if(!e)return;e.innerHTML="";const n=document.body.classList.contains("dark")?"dark":"light",t=document.createElement("script");t.src="https://giscus.app/client.js",t.setAttribute("data-repo","fredrikaverpil/fredrikaverpil.github.io"),t.setAttribute("data-repo-id","MDEwOlJlcG9zaXRvcnkxMzEwNDU4Njc="),t.setAttribute("data-category","General"),t.setAttribute("data-category-id","DIC_kwDOB8-Z684CU9zc"),t.setAttribute("data-mapping","title"),t.setAttribute("data-strict","0"),t.setAttribute("data-reactions-enabled","1"),t.setAttribute("data-emit-metadata","0"),t.setAttribute("data-input-position","bottom"),t.setAttribute("data-theme",n),t.setAttribute("data-lang","en"),t.setAttribute("crossorigin","anonymous"),t.async=!0,e.appendChild(t)}t&&t.addEventListener("click",o);function n(e){const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}const s=document.getElementById("theme-toggle");s&&s.addEventListener("click",()=>{setTimeout(()=>{const e=document.body.classList.contains("dark")?"dark":"light";n(e)},10)}),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{if(!localStorage.getItem("theme")){const t=e.matches?"dark":"light";n(t)}})})()</script><footer><div class=footer-content><span class=footer-icons><a href=https://github.com/markholloway target=_blank rel=noopener title=GitHub><svg role="img" viewBox="0 0 24 24" width="1.2em" height="1.2em" fill="currentColor"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
</a><a href=https://linkedin.com/in/markholloway target=_blank rel=noopener title=LinkedIn><svg role="img" viewBox="0 0 24 24" width="1.2em" height="1.2em" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601.0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144.0-2.063-.926-2.063-2.065.0-1.138.92-2.063 2.063-2.063 1.14.0 2.064.925 2.064 2.063.0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0h.003z"/></svg>
</a><a href=/blog/index.xml target=_blank rel=noopener title=RSS><svg role="img" viewBox="0 0 24 24" width="1.2em" height="1.2em" fill="currentColor"><path d="M19.199 24C19.199 13.467 10.533 4.8.0 4.8V0c13.165.0 24 10.835 24 24h-4.801zM3.291 17.415c1.814.0 3.293 1.479 3.293 3.295.0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526.0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727.0 15.909 7.184 15.909 15.91z"/></svg>
</a><a href=https://cloud.umami.is/share/x4yvhGEscsDh1in8 target=_blank rel=noopener title=Umami><svg role="img" viewBox="0 0 24 24" width="1.2em" height="1.2em" fill="currentColor"><path d="M2.203 8.611H.857a.845.845.0 00-.841.841v.858a13.31 13.31.0 00-.016.6c0 6.627 5.373 12 12 12 6.527.0 11.837-5.212 11.996-11.701.0-.025.004-.05.004-.075V9.452a.845.845.0 00-.841-.841h-1.346c-1.159-4.329-5.112-7.521-9.805-7.521-4.692.0-8.645 3.192-9.805 7.521zm18.444.0H3.37c1.127-3.702 4.57-6.399 8.638-6.399 4.069.0 7.512 2.697 8.639 6.399z"/></svg>
</a></span><span class=footer-text>© Mark Holloway 2005-2026</span></div><script src=/js/main.js></script></footer></body></html>