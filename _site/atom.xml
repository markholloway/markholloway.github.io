<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

 <title>Mark Holloway</title>
 <link href="http://localhost:4000/atom.xml" rel="self"/>
 <link href="http://localhost:4000/"/>
 <updated>2019-08-03T17:39:40-04:00</updated>
 <id>http://localhost:4000</id>
 <author>
   <name></name>
   <email></email>
 </author>

 
 <entry>
   <title>Automate screenshots and video capture in macOS using Terminal</title>
   <link href="http://localhost:4000/2019/05/20/macos-screencapture-terminal/"/>
   <updated>2019-05-20T00:00:00-04:00</updated>
   <id>http://localhost:4000/2019/05/20/macos-screencapture-terminal</id>
   <content type="html">&lt;p&gt;Apple includes a command line utility called &lt;code class=&quot;highlighter-rouge&quot;&gt;screencapture&lt;/code&gt; which allows macOS to take any number of screenshots silently in the background, hands-free, while the user is working. 
&lt;!--more--&gt;&lt;/p&gt;

&lt;p&gt;Keyboard shortcuts such as &lt;code class=&quot;highlighter-rouge&quot;&gt;Command+Shift+4&lt;/code&gt; will save a screencapture to the desktop and save the file as a PNG.  Another frequently used shortcut &lt;code class=&quot;highlighter-rouge&quot;&gt;Command+Control+Shift+4&lt;/code&gt; copies the screencapture to the clipboard.&lt;/p&gt;

&lt;p&gt;Beyond keyboard shortcuts there is a Screenshot utility located in Applications &amp;gt; Utilities. This places a panel at the bottom of the desktop providing more control of individual screencaptures.&lt;/p&gt;

&lt;p&gt;The above methods assume the user doesnâ€™t need their hands at the time of taking the screencapture. It may also feel tedious to manually take screenshots one at a time if needing more then a few. The &lt;code class=&quot;highlighter-rouge&quot;&gt;screenshot&lt;/code&gt; command line utility solves this problem while providing significant flexibility.&lt;/p&gt;

&lt;h3 id=&quot;viewing-screencapture-options&quot;&gt;Viewing &lt;code class=&quot;highlighter-rouge&quot;&gt;screencapture&lt;/code&gt; options&lt;/h3&gt;

&lt;p&gt;Open macOS Terminal and run screencapture from the command line to see the optional arguements.&lt;/p&gt;

&lt;p&gt;A few nice options worth noting are capturing the Touch Bar on a MacBook Pro, passing screencaptures directly to Mail, Preview, Messages, or the Clipboard, capturing desktop video and passing it to Quicktime, and Interactive Mode which allows changing what part of the screen should be captured.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mbp2018:~ mh$ screencapture -h
usage: screencapture [-icMPmwsWxSCUtoa] [files]
	-c         force screen capture to go to the clipboard
	-b         capture Touch Bar - non-interactive modes only
	-C         capture the cursor as well as the screen. only in 
			   non-interactive modes
	-d         display errors to the user graphically
	.
	.
	.
	.
	.etc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;build-a-script-to-automatate-repetitive-screencapture-tasks&quot;&gt;Build a script to automatate repetitive screencapture tasks&lt;/h2&gt;

&lt;p&gt;I want to write a script that takes 45 screencaptures of my desktop every 30 seconds and saves them as &lt;code class=&quot;highlighter-rouge&quot;&gt;.jpg&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Open your preferred IDE or use macOS TextEdit. If using TextEdit it is important to save the file in plain text format. Save the file using the &lt;code class=&quot;highlighter-rouge&quot;&gt;.sh&lt;/code&gt; extension rather than &lt;code class=&quot;highlighter-rouge&quot;&gt;.txt&lt;/code&gt; since our goal is writig a &lt;code class=&quot;highlighter-rouge&quot;&gt;bash&lt;/code&gt; script and we will execute from the &lt;code class=&quot;highlighter-rouge&quot;&gt;shell&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# script to run screencapture every one second&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;screenshot&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;which screencapture&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -x -m -C&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;freq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;30		&lt;span class=&quot;c&quot;&gt;#take a screenshot every 30 seconds&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;maxshots&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;45	&lt;span class=&quot;c&quot;&gt;#take 45 screenshots then quit&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;while &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;getopts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;af:m&quot;&lt;/span&gt; opt&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do
	case&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$opt&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in
	&lt;/span&gt;f &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;freq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$OPTARG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;		&lt;span class=&quot;p&quot;&gt;;;&lt;/span&gt;
	m &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;maxshots&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$OPTARG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;	&lt;span class=&quot;p&quot;&gt;;;&lt;/span&gt;
	? &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Usage: &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; [-f frequency] [-m maxcaps]&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&amp;amp;2
		&lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;1
	&lt;span class=&quot;k&quot;&gt;esac
done

&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;counter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 	&lt;span class=&quot;c&quot;&gt;#set startng number; incrementally append to filename&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$counter&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-lt&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$maxshots&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$screenshot&lt;/span&gt; screenshot&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;counter&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;.jpg
	&lt;span class=&quot;nv&quot;&gt;counter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$((&lt;/span&gt; counter &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;))&lt;/span&gt; 
	sleep &lt;span class=&quot;nv&quot;&gt;$freq&lt;/span&gt; 
&lt;span class=&quot;k&quot;&gt;done

&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;how-it-works&quot;&gt;How it Works&lt;/h2&gt;

&lt;p&gt;Before executing and testing the script I would like to explain what is happening. When the script runs it will take a screenshot of the desktop every 30 seconds and quit after 45 screenshots. This is set by the value &lt;code class=&quot;highlighter-rouge&quot;&gt;freq=30&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;maxshots=45&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;making-screencapsh-executable&quot;&gt;Making &lt;code class=&quot;highlighter-rouge&quot;&gt;screencap.sh&lt;/code&gt; executable&lt;/h2&gt;

&lt;p&gt;In order to run the shell script we must change its permission so it is excutable.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mbp2017:~ mh&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;pwd&lt;/span&gt;
/Users/mh/Desktop

mbp2017:~ mh&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls &lt;/span&gt;screen&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
screencap.sh

mbp2017:~ mh&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;chmod +x screencap.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Execute the file. It will run silently in the background.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mbp2017:~ mh&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./screencap.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Once the script has finished there will be 45 &lt;code class=&quot;highlighter-rouge&quot;&gt;.jpg&lt;/code&gt; files in the folder where the script was run.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mbp2017:~ mh$ ls

screenshot1.jpg
screenshot2.jpg
screenshot3.jpg
screenshot4.jpg
screenshot5.jpg
screenshot6.jpg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;overide-the-settings-in-the-script&quot;&gt;Overide the settings in the script&lt;/h2&gt;

&lt;p&gt;View the script and notice &lt;code class=&quot;highlighter-rouge&quot;&gt;f&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;m&lt;/code&gt; allow for optional arguements using &lt;code class=&quot;highlighter-rouge&quot;&gt;$OPTARG&lt;/code&gt;. Whatever arguements are passed from the command line they will override the pre-configured settings.&lt;/p&gt;

&lt;p&gt;This will change the frequency from 30 seconds to 8 seconds. Everything else remains at their default settings referenced in the script.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mbp2017:~ mh&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./screencap.sh &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; 8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Building on top of this script with additional default parameters and command line arguements makes the &lt;code class=&quot;highlighter-rouge&quot;&gt;screencapture&lt;/code&gt; utility convenient and powerful.&lt;/p&gt;

</content>
 </entry>
 

</feed>