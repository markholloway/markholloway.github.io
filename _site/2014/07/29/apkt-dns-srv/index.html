<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    
      Acme Packet SBC and DNS-SRV Load Balancing “ping-all-addresses” &middot; Mark Holloway
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="http://localhost:4000/public/css/poole_custom.css">
  <link rel="stylesheet" href="/public/css/syntax_dracula.css">
  <link rel="stylesheet" href="http://localhost:4000/public/css/hyde_custom.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface|Press+Start+2P|Exo+2:700">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="http://localhost:4000/public/favicon.ico">



  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- Force https -->
  
  <script>
    var host = 'markholloway.github.io';
    if (window.location.host == host && window.location.protocol != 'https:') {
        window.location.protocol = 'https:';
    }
</script>

  

  <!-- Jekyll SEO tag plugin -->
  <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Acme Packet SBC and DNS-SRV Load Balancing “ping-all-addresses” | Mark Holloway</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Acme Packet SBC and DNS-SRV Load Balancing “ping-all-addresses”" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The Acme Packet SBC supports the ability to load balance SIP traffic several difference ways. Simply stated, a SIP invite will ingress to the SBC. The SBC will lookup the destination and if it results in a Session Agent Group or SAG configuration with two or more Session Agents, the SBC will egress the SIP invite using one of the selected load balancing algorithms such as Least Busy." />
<meta property="og:description" content="The Acme Packet SBC supports the ability to load balance SIP traffic several difference ways. Simply stated, a SIP invite will ingress to the SBC. The SBC will lookup the destination and if it results in a Session Agent Group or SAG configuration with two or more Session Agents, the SBC will egress the SIP invite using one of the selected load balancing algorithms such as Least Busy." />
<link rel="canonical" href="http://localhost:4000/2014/07/29/apkt-dns-srv/" />
<meta property="og:url" content="http://localhost:4000/2014/07/29/apkt-dns-srv/" />
<meta property="og:site_name" content="Mark Holloway" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-07-29T00:00:00-04:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@twilion2" />
<script type="application/ld+json">
{"description":"The Acme Packet SBC supports the ability to load balance SIP traffic several difference ways. Simply stated, a SIP invite will ingress to the SBC. The SBC will lookup the destination and if it results in a Session Agent Group or SAG configuration with two or more Session Agents, the SBC will egress the SIP invite using one of the selected load balancing algorithms such as Least Busy.","@type":"BlogPosting","url":"http://localhost:4000/2014/07/29/apkt-dns-srv/","headline":"Acme Packet SBC and DNS-SRV Load Balancing “ping-all-addresses”","dateModified":"2014-07-29T00:00:00-04:00","datePublished":"2014-07-29T00:00:00-04:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2014/07/29/apkt-dns-srv/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

  
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-131536379-1', 'auto');
  ga('send', 'pageview');

</script>



  <body>
    
    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Mark Holloway
        </a>
      </h1>
      <p class="lead">Turning Telco into Code</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/archive/">Archive</a>
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <p>
        <a class="sidebar-nav-icons" href="https://github.com/markholloway" target="blank"><img src="/public/GitHub-Mark-Light-32px.png" alt="Github" width="18" height="18"></a>
        <a class="sidebar-nav-icons" href="http://www.linkedin.com/in/mholloway/" target="blank"><img src="/public/linkedin.png" alt="LinkedIn" width="19" height="19"></a>
      </p>

    </nav>

    <p><small>&copy; 2019 All rights reserved.</small></p>
  </div>
</div>


    <div class="content container">
      



<div class="post">
  <h1 class="post-title">Acme Packet SBC and DNS-SRV Load Balancing “ping-all-addresses”</h1>
  <span class="post-date">29 Jul 2014 <i class="fa fa-tags"></i> <a href="/blog/tag/acme/">#acme packet</a> <!--comma--><a href="/blog/tag/sbc/">#sbc</a> <!--comma--><a href="/blog/tag/sip/">#sip</a> </span>

  <p>The Acme Packet SBC supports the ability to <code class="highlighter-rouge">load balance SIP traffic</code> several difference ways. Simply stated, a SIP invite will ingress to the SBC. The SBC will lookup the destination and if it results in a Session Agent Group or <code class="highlighter-rouge">SAG</code> configuration with two or more <code class="highlighter-rouge">Session Agents</code>, the SBC will egress the SIP invite using one of the selected load balancing algorithms such as Least Busy.</p>

<!--more-->

<p>The SBC also supports <code class="highlighter-rouge">DNS SRV</code> service records for load balancing. For those not familiar with DNS SRV, it’s a form of DNS that allows a single domain name (associated with a service and protocol) to resolve to many possible destinations. The destinations may be <code class="highlighter-rouge">equal</code> or <code class="highlighter-rouge">weighted differently</code>. The following is an example of a DNS SRV record for SIP over UDP looks like. In this case all records have an equal weight of 10.</p>

<p><img src="/blog/assets/apkt/apkt-dns-srv01.png" alt="" /></p>

<p>The domain name <code class="highlighter-rouge">sip.apkt.com</code> will resolve to five different A records. The lookup must be a DNS SRV lookup for this to resolve correctly. In this case we are using <code class="highlighter-rouge">SIP over UDP</code> as the service which has been defined in Bind.</p>

<p>Here is how to <code class="highlighter-rouge">enable</code> DNS SRV load balancing on the SBC. Note this complies with RFC 3263 “Locating SIP Servers”. Once the config has been saved and actives the SBC will <code class="highlighter-rouge">ping</code> the address resolved by sip.apkt.com to see which IP’s are in service.</p>

<p><img src="/blog/assets/apkt/apkt-dns-srv02.png" alt="" /></p>

<p>Now when a SIP Invite <code class="highlighter-rouge">ingresses</code> the SBC and matches a <code class="highlighter-rouge">local-policy</code> where the destination next-hop utilizes DNS SRV load balancing the traffic will be balanced across <code class="highlighter-rouge">all nodes</code>.</p>

<p><img src="/blog/assets/apkt/apkt-dns-srv03.png" alt="" /></p>


</div>

<!--
<div class="donate">
</div>

-->



<!-- fluidvids.js -->
<script src="/public/js/fluidvids/dist/fluidvids.js"></script>
<script>
fluidvids.init({
  selector: ['iframe'],
  players: ['www.youtube.com', 'player.vimeo.com']
});
</script>



  <!-- Disqus comments. -->
<div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables

var disqus_config = function () {
this.page.url = 'http://localhost:4000/2014/07/29/apkt-dns-srv/'; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = '/2014/07/29/apkt-dns-srv/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/

/**

Using variables from _config.yml instead of static entries

*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//mh-blog-2.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



    </div>

  </body>
</html>
