<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    
      Script for macOS that automates desktop screenshots and video capture &middot; Mark Holloway
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="http://localhost:4000/public/css/poole_custom.css">
  <link rel="stylesheet" href="/public/css/syntax_dracula.css">
  <link rel="stylesheet" href="http://localhost:4000/public/css/hyde_custom.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface|Press+Start+2P|Exo+2:700">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="http://localhost:4000/public/favicon.ico">



  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- Force https -->
  
  <script>
    var host = 'markholloway.github.io';
    if (window.location.host == host && window.location.protocol != 'https:') {
        window.location.protocol = 'https:';
    }
</script>

  

  <!-- Jekyll SEO tag plugin -->
  <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Script for macOS that automates desktop screenshots and video capture | Mark Holloway</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Script for macOS that automates desktop screenshots and video capture" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Apple includes a command line utility called screencapture which allows macOS to take any number of screenshots silently in the background, hands-free, while the user is working." />
<meta property="og:description" content="Apple includes a command line utility called screencapture which allows macOS to take any number of screenshots silently in the background, hands-free, while the user is working." />
<link rel="canonical" href="http://localhost:4000/2018/11/14/macos-screencapture-terminal/" />
<meta property="og:url" content="http://localhost:4000/2018/11/14/macos-screencapture-terminal/" />
<meta property="og:site_name" content="Mark Holloway" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-11-14T00:00:00-05:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@twilion2" />
<script type="application/ld+json">
{"description":"Apple includes a command line utility called screencapture which allows macOS to take any number of screenshots silently in the background, hands-free, while the user is working.","@type":"BlogPosting","url":"http://localhost:4000/2018/11/14/macos-screencapture-terminal/","headline":"Script for macOS that automates desktop screenshots and video capture","dateModified":"2018-11-14T00:00:00-05:00","datePublished":"2018-11-14T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2018/11/14/macos-screencapture-terminal/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

  
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-131536379-1', 'auto');
  ga('send', 'pageview');

</script>



  <body>
    
    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Mark Holloway
        </a>
      </h1>
      <p class="lead">Turning Telco into Code</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/archive/">Archive</a>
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <p>
        <a class="sidebar-nav-icons" href="https://github.com/markholloway" target="blank"><img src="/public/GitHub-Mark-Light-32px.png" alt="Github" width="18" height="18"></a>
        <a class="sidebar-nav-icons" href="http://www.linkedin.com/in/mholloway/" target="blank"><img src="/public/linkedin.png" alt="LinkedIn" width="19" height="19"></a>
      </p>

    </nav>

    <p><small>&copy; 2019 All rights reserved.</small></p>
  </div>
</div>


    <div class="content container">
      



<div class="post">
  <h1 class="post-title">Script for macOS that automates desktop screenshots and video capture</h1>
  <span class="post-date">14 Nov 2018 <i class="fa fa-tags"></i> <a href="/blog/tag/macos/">#macOS</a> <!--comma--><a href="/blog/tag/bash/">#bash</a> </span>

  <p>Apple includes a command line utility called <code class="highlighter-rouge">screencapture</code> which allows macOS to take any number of screenshots silently in the background, hands-free, while the user is working. 
<!--more--></p>

<p>Keyboard shortcuts such as <code class="highlighter-rouge">Command+Shift+4</code> will save a screencapture to the desktop and save the file as <code class="highlighter-rouge">.png</code>.  Another frequently used shortcut <code class="highlighter-rouge">Command+Control+Shift+4</code> copies the screencapture to the clipboard.</p>

<p>Beyond keyboard shortcuts there is a Screenshot utility located in <code class="highlighter-rouge">Applications &gt; Utilities</code>. This places a panel at the bottom of the desktop providing more control of individual screencaptures.</p>

<p>The above methods assume the user doesnâ€™t need their hands at the time of taking the screencapture. It may also feel tedious to manually take screenshots one at a time if needing more then a few. The <code class="highlighter-rouge">screenshot</code> command line utility solves this problem while providing significant flexibility.</p>

<h3 id="viewing-screencapture-options">Viewing <code class="highlighter-rouge">screencapture</code> options</h3>

<p>Open macOS Terminal and run screencapture from the command line to see the optional arguements.</p>

<p>A few nice options worth noting are capturing the Touch Bar on a MacBook Pro, passing screencaptures directly to Mail, Preview, Messages, or the Clipboard, capturing desktop video and passing it to Quicktime, and Interactive Mode which allows changing what part of the screen should be captured.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mbp2018:~ mh$ screencapture -h
usage: screencapture [-icMPmwsWxSCUtoa] [files]
	-c         force screen capture to go to the clipboard
	-b         capture Touch Bar - non-interactive modes only
	-C         capture the cursor as well as the screen. only in 
			   non-interactive modes
	-d         display errors to the user graphically
	-i         capture screen interactively, by selection or window
				control key - causes screen shot to go to clipboard
				space key   - toggle between mouse selection and
				              window selection modes
				escape key  - cancels interactive screen shot
	-m         only capture the main monitor, undefined if -i is set
	-D&lt;display&gt; screen capture or record from the display specified.
	 			-D 1 is main display, -D 2 secondary, etc.
	-o         in window capture mode, do not capture the shadow of window
	-p         screen capture will use the default settings for capture. 
			   The files argument will be ignored
	-M         screen capture output will go to a new Mail message
	-P         screen capture output will open in Preview or 
	           QuickTime Player if video
	-I         screen capture output will open in Messages
	-B&lt;bundleid&gt; screen capture output will open in app with bundleid
	-s         only allow mouse selection mode
	-S         in window capture mode, capture the screen not the window
	-J&lt;style&gt;  sets the starting of interfactive capture
				selection       - captures screen in selection mode
				window          - captures screen in window mode
				video           - records screen in selection mode
	-t&lt;format&gt; image format to create, default is png 
			   (other options include pdf, jpg, tiff and other formats)
	-T&lt;seconds&gt; take the picture after a delay of &lt;seconds&gt;, default is 5
	-w         only allow window selection mode
	-W         start interaction in window selection mode
	-x         do not play sounds
	-a         do not include windows attached to selected windows
	-r         do not add dpi meta data to image
	-l&lt;windowid&gt; capture this windowsid
	-R&lt;x,y,w,h&gt; capture screen rect
	-v        capture video recording of the screen
	-V&lt;seconds&gt; limits video capture to specified seconds
	-A&lt;id&gt;    captures audio during a video recording using default input. 
			  Optional specify the id of the audio source
	-k        show clicks in video recording mode
	-U        Show interactive toolbar in interactive mode
	-u        present UI after screencapture is complete. 
	          files passed to command line will be ignored
	files     where to save the screen capture, 1 file per screen
</code></pre></div></div>

<h2 id="building-a-script-to-automatate-repetitive-screencapture-tasks">Building a script to automatate repetitive screencapture tasks</h2>

<p>I want to write a script that takes 45 screencaptures of my desktop every 30 seconds and saves them as <code class="highlighter-rouge">.jpg</code>.</p>

<p>Open your preferred IDE or use macOS TextEdit. If using TextEdit it is important to save the file in plain text format. Save the file using the <code class="highlighter-rouge">.sh</code> extension rather than <code class="highlighter-rouge">.txt</code> since our goal is writig a <code class="highlighter-rouge">bash</code> script and we will execute from the <code class="highlighter-rouge">shell</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># script to run screencapture every one second</span>

<span class="nv">screenshot</span><span class="o">=</span><span class="s2">"</span><span class="k">$(</span>which screencapture<span class="k">)</span><span class="s2"> -x -m -C"</span>
<span class="nv">freq</span><span class="o">=</span>30		<span class="c">#take a screenshot every 30 seconds</span>
<span class="nv">maxshots</span><span class="o">=</span>45	<span class="c">#take 45 screenshots then quit</span>

<span class="k">while </span><span class="nb">getopts</span> <span class="s2">"af:m"</span> opt<span class="p">;</span> <span class="k">do
	case</span> <span class="nv">$opt</span> <span class="k">in
	</span>f <span class="p">)</span> <span class="nv">freq</span><span class="o">=</span><span class="nv">$OPTARG</span><span class="p">;</span>		<span class="p">;;</span>
	m <span class="p">)</span> <span class="nv">maxshots</span><span class="o">=</span><span class="nv">$OPTARG</span><span class="p">;</span>	<span class="p">;;</span>
	? <span class="p">)</span> <span class="nb">echo</span> <span class="s2">"Usage: </span><span class="nv">$0</span><span class="s2"> [-f frequency] [-m maxcaps]"</span> <span class="o">&gt;</span>&amp;2
		<span class="nb">exit </span>1
	<span class="k">esac
done

</span><span class="nv">counter</span><span class="o">=</span>1 	<span class="c">#set startng number; incrementally append to filename</span>

<span class="k">while</span> <span class="o">[</span> <span class="nv">$counter</span> <span class="nt">-lt</span> <span class="nv">$maxshots</span> <span class="o">]</span> <span class="p">;</span> <span class="k">do</span>
	<span class="nv">$screenshot</span> screenshot<span class="k">${</span><span class="nv">counter</span><span class="k">}</span>.jpg
	<span class="nv">counter</span><span class="o">=</span><span class="k">$((</span> counter <span class="o">+</span> <span class="m">1</span> <span class="k">))</span> 
	sleep <span class="nv">$freq</span> 
<span class="k">done

</span><span class="nb">exit</span>
</code></pre></div></div>

<h2 id="how-it-works">How it Works</h2>

<p>Before executing and testing the script I would like to explain what is happening. When the script runs it will take a screenshot of the desktop every 30 seconds and quit after 45 screenshots. This is set by the value <code class="highlighter-rouge">freq=30</code> and <code class="highlighter-rouge">maxshots=45</code>.</p>

<h2 id="making-screencapsh-executable">Making <code class="highlighter-rouge">screencap.sh</code> executable</h2>

<p>In order to run the shell script we must change its permission so it is excutable.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mbp2017:~ mh<span class="nv">$ </span><span class="nb">pwd</span>
/Users/mh/Desktop

mbp2017:~ mh<span class="nv">$ </span><span class="nb">ls </span>screen<span class="k">*</span>
screencap.sh

mbp2017:~ mh<span class="nv">$ </span>chmod +x screencap.sh
</code></pre></div></div>

<p>Execute the file. It will run silently in the background.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mbp2017:~ mh<span class="nv">$ </span>./screencap.sh
</code></pre></div></div>

<p>Once the script has finished there will be 45 <code class="highlighter-rouge">.jpg</code> files in the folder where the script was run.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mbp2017:~ mh$ ls

screenshot1.jpg
screenshot2.jpg
screenshot3.jpg
screenshot4.jpg
screenshot5.jpg
screenshot6.jpg
</code></pre></div></div>

<h2 id="overide-the-settings-in-the-script">Overide the settings in the script</h2>

<p>View the script and notice <code class="highlighter-rouge">f</code> and <code class="highlighter-rouge">m</code> allow for optional arguements using <code class="highlighter-rouge">$OPTARG</code>. Whatever arguements are passed from the command line they will override the pre-configured settings.</p>

<p>This will change the frequency from 30 seconds to 8 seconds. Everything else remains at their default settings referenced in the script.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mbp2017:~ mh<span class="nv">$ </span>./screencap.sh <span class="nt">-f</span> 8
</code></pre></div></div>

<p>Building on top of this script with additional default parameters and command line arguements makes the <code class="highlighter-rouge">screencapture</code> utility convenient and powerful.</p>



</div>

<!--
<div class="donate">
</div>

-->



<!-- fluidvids.js -->
<script src="/public/js/fluidvids/dist/fluidvids.js"></script>
<script>
fluidvids.init({
  selector: ['iframe'],
  players: ['www.youtube.com', 'player.vimeo.com']
});
</script>



  <!-- Disqus comments. -->
<div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables

var disqus_config = function () {
this.page.url = 'http://localhost:4000/2018/11/14/macos-screencapture-terminal/'; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = '/2018/11/14/macos-screencapture-terminal/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/

/**

Using variables from _config.yml instead of static entries

*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//mh-blog-2.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



    </div>

  </body>
</html>
